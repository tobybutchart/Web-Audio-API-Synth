!function(){var an=this,am="undefined"==typeof global?an:an.window,al="0.6.0",ak={},aj=!1,ai={},ah={65:"Cl",87:"C#l",83:"Dl",69:"D#l",68:"El",70:"Fl",84:"F#l",71:"Gl",89:"G#l",90:"G#l",72:"Al",85:"A#l",74:"Bl",75:"Cu",79:"C#u",76:"Du",80:"D#u",59:"Eu",186:"Eu",222:"Fu",221:"F#u",220:"Gu"},ag=function(b){return Math.floor((ak.width-b)/b)},af=function(d){var c;user_settings=d||{},ak={id:user_settings.id||"keyboard",octaves:user_settings.octaves||3,width:user_settings.width,height:user_settings.height,startNote:user_settings.startNote||"A3",whiteKeyColour:user_settings.whiteKeyColour||"#fff",blackKeyColour:user_settings.blackKeyColour||"#000",activeColour:user_settings.activeColour||"yellow",borderColour:user_settings.borderColour||"#000",keyboardLayout:user_settings.keyboardLayout||"en"},c=document.getElementById(ak.id),"undefined"==typeof ak.width&&(ak.width=c.offsetWidth),"undefined"==typeof ak.height&&(ak.height=c.offsetHeight),ak.startOctave=parseInt(ak.startNote.charAt(1),10),X(),N.call(this,c)},ae=function(f){var e,h,g=["A","A#","B","C","C#","D","D#","E","F","F#","G","G#"];return h=3===f.length?f.charAt(2):f.charAt(1),e=g.indexOf(f.slice(0,-1)),e=3>e?e+12+12*(h-1)+1:e+12*(h-1)+1,440*Math.pow(2,(e-49)/12)},ad=function(b){(null!==b||void 0===typeof b)&&(b.style.backgroundColor=ak.activeColour)},ac=function(b){null!==b&&("white"===b.getAttribute("data-note-type")?b.style.backgroundColor=ak.whiteKeyColour:b.style.backgroundColor=ak.blackKeyColour)},ab=function(g){var d,j=0,i=g.length,h=[];for(d=0;i>d;d++){if(ak.startNote.charAt(0)===g[d]){j=d;break}}for(d=0;i>d;d++){d+j>i-1?h[d]=g[d+j-i]:h[d]=g[d+j]}return h},aa=function(b){b.el.style.backgroundColor=ak.whiteKeyColour,b.el.style.border="1px solid "+ak.borderColour,b.el.style.borderRight=0,b.el.style.height=ak.height+"px",b.el.style.width=b.width+"px",b.el.style.borderRadius="0 0 5px 5px",b.noteNumber===K()-1&&(b.el.style.border="1px solid "+ak.borderColour)},Z=function(e){var d=ag(K()),f=Math.floor(d/2);e.el.style.backgroundColor=ak.blackKeyColour,e.el.style.border="1px solid "+ak.borderColour,e.el.style.position="absolute",e.el.style.left=Math.floor((d+1)*(e.noteNumber+1)-f/2)+"px",e.el.style.width=f+"px",e.el.style.height=ak.height/1.5+"px",e.el.style.borderRadius="0 0 3px 3px"},Y=function(b){b.el.style.display="inline-block",b.el.style["-webkit-user-select"]="none","white"===b.colour?aa(b):Z(b)},W=function(d){var c=function(b){b.style.cursor="default",b.style.fontSize="0px",b.style.height=ak.height+"px",b.style.padding=0,b.style.position="relative",b.style.listStyle="none",b.style.margin=0,b.style.width=ak.width+"px",b.style["-webkit-user-select"]="none"};c(d.container),c(d.el)},U=function(d,c){"li"==d.tagName.toLowerCase()&&(aj=!0,ad(d),c(d.title,ae(d.title)))},S=function(d,c){"li"==d.tagName.toLowerCase()&&(aj=!1,ac(d),c(d.title,ae(d.title)))},Q=function(d,c){aj&&(ad(d),c(d.title,ae(d.title)))},O=function(d,c){aj&&(ac(d),c(d.title,ae(d.title)))},M=function(b){return b.el=document.createElement("li"),b.el.id=b.id,b.el.title=b.id,b.el.setAttribute("data-note-type",b.colour),Y(b),b},K=function(){return 7*ak.octaves},J=function(){var h,d,n=this,m=[],l=0,k=ak.startOctave,j=K();for(h=0;j>h;h++){h%this.whiteNotes.length===0&&(l=0),bizarre_note_counter=this.whiteNotes[l],"C"===bizarre_note_counter&&0!==h&&k++,d=M({colour:"white",octave:k,width:ag(j),id:this.whiteNotes[l]+k,noteNumber:h}),m.push(d.el),h!==j-1&&this.notesWithSharps.forEach(function(b,a){b===n.whiteNotes[l]&&(d=M({colour:"black",octave:k,width:ag(j)/2,id:n.whiteNotes[l]+"#"+k,noteNumber:h}),m.push(d.el))}),l++}return m},I=function(b){b.keys.forEach(function(a){b.el.appendChild(a)})},H=function(b){ak.keyPressOffset="C"===b[0]?0:1},X=function(){var b={container:document.getElementById(ak.id),el:document.createElement("ul"),whiteNotes:ab(["C","D","E","F","G","A","B"]),notesWithSharps:ab(["C","D","F","G","A"])};return b.keys=J.call(b),H(b.whiteNotes),W(b),I(b),b.container.appendChild(b.el),b},V=function(b){return ah[b].replace("l",parseInt(ak.startOctave,10)+ak.keyPressOffset).replace("u",(parseInt(ak.startOctave,10)+ak.keyPressOffset+1).toString())},T=function(e,d){var f;return e.keyCode in ai?!1:(ai[e.keyCode]=!0,"undefined"!=typeof ah[e.keyCode]?(f=V(e.keyCode),d(f,ae(f)),ad(document.getElementById(f)),!0):!1)},R=function(e,d){var f;return delete ai[e.keyCode],"undefined"!=typeof ah[e.keyCode]?(f=V(e.keyCode),d(f,ae(f)),ac(document.getElementById(f)),!0):!1},P=function(b){return b.ctrlKey||b.metaKey||b.altKey},N=function(b){var d=this;b.addEventListener("mousedown",function(c){U(c.target,d.keyDown)}),b.addEventListener("mouseup",function(c){S(c.target,d.keyUp)}),b.addEventListener("mouseover",function(c){Q(c.target,d.keyDown)}),b.addEventListener("mouseout",function(c){O(c.target,d.keyUp)}),"ontouchstart" in document.documentElement&&(b.addEventListener("touchstart",function(c){U(c.target,d.keyDown)}),b.addEventListener("touchend",function(c){S(c.target,d.keyUp)}),b.addEventListener("touchleave",function(c){O(c.target,d.keyUp)}),b.addEventListener("touchcancel",function(c){O(c.target,d.keyUp)}))},L=function(b){this.version=al,this.keyDown=function(){},this.keyUp=function(){},af.call(this,b)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=L),exports.QwertyHancock=L):an.QwertyHancock=L}(this);